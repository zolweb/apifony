<?php

namespace App\Controller;

{% set schema = spec.components.schemas[name] %}
class {{ name }}Schema
{
    /**
    {%~ for name, property in schema.properties %}
    {%~ if property.type is defined and property.type is same as ('array') %}
    {%~ if property.items.type is defined %}
     * @param {{ name in (schema.required ?? []) ? '' : '?' }}array<{{ property.items.type|toPhpType }}> ${{ name }}
    {%~ else %}
    {{ genSchema(spec, property.items['$ref']) }} * @param {{ name in (schema.required ?? []) ? '' : '?' }}array<{{ property.items['$ref']|toSchemaClassName }}> ${{ name }},
    {%~ endif %}
    {%~ endif %}
    {%~ endfor %}
    */
    public function __construct(
        {%~ for name, property in schema.properties %}
        {%~ if property.type is defined %}
        public readonly {{ name in (schema.required ?? []) ? '' : '?' }}{{ property.type|toPhpType }} ${{ name }}{{ name in (schema.required ?? []) ? '' : ' = null' }},
        {%~ else %}
        public readonly {{ name in (schema.required ?? []) ? '' : '?' }}{{ genSchema(spec, property['$ref']) }}{{ property['$ref']|toSchemaClassName }} ${{ name }}{{ name in (schema.required ?? []) ? '' : ' = null' }},
        {%~ endif %}
        {%~ endfor %}
    ) {
    }
}