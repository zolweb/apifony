{%~ autoescape false %}
<?php

namespace {{ response.namespace }};

class {{ response.getClassName }}
{
    public const CODE = '{{ response.code }}';
    public const CONTENT_TYPE = {{ response.contentType is null ? 'null' : '\'' ~ response.contentType ~ '\'' }};

{%~ if response.contentType is null %}
    public readonly string $payload;
{%~ endif %}

    public function __construct(
{%~ if response.contentType is not null %}
        public readonly {{ response.payloadPhpType }} $payload,
{%~ endif %}
{%~ for header in response.headers %}
        public readonly {{ header.phpType }} ${{ header.variableName }},
{%~ endfor %}
    ) {
{%~ if response.contentType is null %}
        $this->payload = '';
{%~ endif %}
    }

    /**
     * @return array<string, ?string>
     */
    public function getHeaders(): array
    {
        return [
{%~ for header in response.headers %}
            '{{ header.name }}' => strval($this->{{ header.variableName }}),
{%~ endfor %}
            'content-type' => self::CONTENT_TYPE,
        ];
    }
}
{%~ endautoescape %}